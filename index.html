<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Information Form</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>EMPLOYEE INCIDENT / INJURY REPORT FORM</h3>
            <p>Please complete the following form</p>
        </header>

<div class="progress-container">
    <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
    </div>
    <div class="progress-text" id="progress-text">Step 1 of 5: Employee Information</div>
</div>

        
        <!-- Messages will appear here -->
        <div id="message" style="display: none;"></div>

        <!-- SCREEN 1: Employee Information -->
        <div id="screen-1" class="form-screen">
            <div class="form-section">
                <h3>Employee Information</h3>
                <p>Please fill out your employee information below:</p>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="fullName">Full Name <span class="required-indicator">*</span>:</label>
                        <input type="text" id="fullName" name="fullName" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone <span class="required-indicator">*</span>:</label>
                        <input type="tel" id="phone" name="phone" placeholder="(555) 123-4567" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="age">Age:</label>
                        <input type="number" id="age" name="age" placeholder="Enter your age" min="16" max="100">
                    </div>
                    <div class="form-group">
                        <label for="email">Email <span class="required-indicator">*</span>:</label>
                        <input type="email" id="email" name="email" placeholder="cstainton@shifttransit.net" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="jobTitle">Job Title <span class="required-indicator">*</span>:</label>
                        <input type="text" id="jobTitle" name="jobTitle" placeholder="Enter your job title" required>
                    </div>
                    <div class="form-group">
                        <label>Length of Employment:</label>
                        <div class="employment-length-row">
                            <div class="employment-input">
                                <input type="number" id="employmentYears" name="employmentYears" placeholder="0" min="0" max="50">
                                <label for="employmentYears">Years</label>
                            </div>
                            <div class="employment-input">
                                <input type="number" id="employmentMonths" name="employmentMonths" placeholder="0" min="0" max="11">
                                <label for="employmentMonths">Months</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="supervisor">Immediate Supervisor <span class="required-indicator">*</span>:</label>
                        <input type="text" id="supervisor" name="supervisor" placeholder="Enter supervisor's name" required>
                    </div>
                    <div class="form-group">
                        <label for="employmentStatus">Employment Status <span class="required-indicator">*</span>:</label>
                        <select id="employmentStatus" name="employmentStatus" required>
                            <option value="">Select employment status...</option>
                            <option value="Regular Full Time">Regular Full Time</option>
                            <option value="Regular Part Time">Regular Part Time</option>
                            <option value="Temporary Full Time">Temporary Full Time</option>
                            <option value="Temporary Part Time">Temporary Part Time</option>
                            <option value="Contract">Contract</option>
                            <option value="Intern">Intern</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="form-actions">
                <button type="button" id="next-to-screen-2">Next Page →</button>
            </div>
        </div>

        <!-- SCREEN 2: First Responder Information -->
        <div id="screen-2" class="form-screen" style="display: none;">
            <div class="form-section">
                <h3>First Responder Information</h3>
                <p>Please provide information about any first responders involved (all fields are optional).</p>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="responder">Responder:</label>
                        <select id="responder" name="responder">
                            <option value="">Select responder type...</option>
                            <option value="police">Police</option>
                            <option value="paramedic">Paramedic</option>
                            <option value="firefighter">Firefighter</option>
                            <option value="none">None</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <!-- Other responder text input (hidden by default) -->
                    <div class="form-group" id="other-responder-group" style="display: none;">
                        <label for="otherResponder">Please specify:</label>
                        <input type="text" id="otherResponder" name="otherResponder" placeholder="Enter responder type">
                    </div>
                </div>

                <div class="form-group">
                    <label for="responderName">Responder's Name or Identification (if applicable):</label>
                    <input type="text" id="responderName" name="responderName" placeholder="Enter name or badge number">
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="policeReportFiled" name="policeReportFiled">
                        Police report filed
                    </label>
                </div>

                <div class="form-group">
                    <label for="policeReportNumber">Police report #:</label>
                    <input type="text" id="policeReportNumber" name="policeReportNumber" placeholder="Enter report number">
                </div>

                <div class="form-group">
                    <label for="witnesses">Name of witnesses:</label>
                    <textarea id="witnesses" name="witnesses" rows="4" placeholder="Enter witness names and contact information"></textarea>
                </div>
            </div>
            
            <div class="form-actions">
                <button type="button" id="back-to-screen-1">← Back</button>
                <button type="button" id="next-to-screen-3">Next Page →</button>
            </div>
        </div>

        <div id="screen-3" class="form-screen" style="display: none;">
    <div class="form-section">
        <h3>Incident / Injury Details</h3>
        <p>Please provide detailed information about the incident or injury.</p>
        
        <div class="form-row">
            <div class="form-group">
                <label for="incidentDate">Date of Incident <span class="required-indicator">*</span>:</label>
                <input type="date" id="incidentDate" name="incidentDate" required>
            </div>
            <div class="form-group">
                <label for="incidentTime">Time of Incident:</label>
                <input type="time" id="incidentTime" name="incidentTime">
            </div>
        </div>

        <div class="form-group">
            <label for="incidentLocation">Location of Incident <span class="required-indicator">*</span>:</label>
            <input type="text" id="incidentLocation" name="incidentLocation" placeholder="Enter specific location where incident occurred" required>
        </div>

        <!-- New: What part of workday -->
        <div class="form-group">
            <label for="workdayPart">What part of employee's workday did the incident occur <span class="required-indicator">*</span>:</label>
            <select id="workdayPart" name="workdayPart" required>
                <option value="">Select when incident occurred...</option>
                <option value="entering-leaving">Entering or leaving work</option>
                <option value="normal-activities">Doing normal work activities</option>
                <option value="meal-period">During meal period</option>
                <option value="break">During break</option>
                <option value="overtime">Working overtime</option>
                <option value="other">Other</option>
            </select>
        </div>

        <!-- Other workday part text input (hidden by default) -->
        <div class="form-group" id="other-workday-group" style="display: none;">
            <label for="otherWorkdayPart">Please specify:</label>
            <input type="text" id="otherWorkdayPart" name="otherWorkdayPart" placeholder="Please describe when the incident occurred">
        </div>

        <!-- Body diagram for injury type -->
<div class="form-group">
    <label>Type of Injury - Click on the body parts to indicate injury locations:</label>
    <p class="instruction-text">You can select multiple body parts. Click again to deselect.</p>
    
    <div class="body-diagram-container">
        <div class="body-diagram">
            <svg width="350" height="450" viewBox="0 0 350 450" class="body-svg">
                <!-- Head -->
                <circle cx="175" cy="50" r="30" class="body-part" data-part="Head" />
                <text x="175" y="57" text-anchor="middle" class="body-label">Head</text>
                
                <!-- Neck -->
                <rect x="162" y="75" width="26" height="20" class="body-part" data-part="Neck" />
                <text x="175" y="89" text-anchor="middle" class="body-label">Neck</text>
                
                <!-- Left Shoulder -->
                <circle cx="135" cy="110" r="18" class="body-part" data-part="Left Shoulder" />
                <text x="135" y="116" text-anchor="middle" class="body-label">L.Shoulder</text>
                
                <!-- Right Shoulder -->
                <circle cx="215" cy="110" r="18" class="body-part" data-part="Right Shoulder" />
                <text x="215" y="116" text-anchor="middle" class="body-label">R.Shoulder</text>
                
                <!-- Chest/Torso -->
                <rect x="150" y="95" width="50" height="70" class="body-part" data-part="Chest/Torso" />
                <text x="175" y="135" text-anchor="middle" class="body-label">Chest</text>
                
                <!-- Left Arm -->
                <rect x="110" y="125" width="20" height="60" class="body-part" data-part="Left Arm" />
                <text x="120" y="160" text-anchor="middle" class="body-label">L.Arm</text>
                
                <!-- Right Arm -->
                <rect x="220" y="125" width="20" height="60" class="body-part" data-part="Right Arm" />
                <text x="230" y="160" text-anchor="middle" class="body-label">R.Arm</text>
                
                <!-- Left Hand -->
                <circle cx="120" cy="195" r="12" class="body-part" data-part="Left Hand" />
                <text x="120" y="201" text-anchor="middle" class="body-label">L.Hand</text>
                
                <!-- Right Hand -->
                <circle cx="230" cy="195" r="12" class="body-part" data-part="Right Hand" />
                <text x="230" y="201" text-anchor="middle" class="body-label">R.Hand</text>
                
                <!-- Back/Spine -->
                <rect x="170" y="165" width="10" height="50" class="body-part" data-part="Back/Spine" />
                <text x="175" y="195" text-anchor="middle" class="body-label">Back</text>
                
                <!-- Left Leg -->
                <rect x="157" y="210" width="18" height="80" class="body-part" data-part="Left Leg" />
                <text x="166" y="255" text-anchor="middle" class="body-label">L.Leg</text>
                
                <!-- Right Leg -->
                <rect x="175" y="210" width="18" height="80" class="body-part" data-part="Right Leg" />
                <text x="184" y="255" text-anchor="middle" class="body-label">R.Leg</text>

                                
                <!-- Left Knee -->
                <circle cx="166" cy="295" r="10" class="body-part" data-part="Left Knee" />
                <text x="166" y="301" text-anchor="middle" class="body-label">L.Knee</text>
                
                <!-- Right Knee -->
                <circle cx="184" cy="295" r="10" class="body-part" data-part="Right Knee" />
                <text x="184" y="301" text-anchor="middle" class="body-label">R.Knee</text>
                
                <!-- Left Foot -->
                <ellipse cx="166" cy="330" rx="15" ry="10" class="body-part" data-part="Left Foot" />
                <text x="166" y="336" text-anchor="middle" class="body-label">L.Foot</text>
                
                <!-- Right Foot -->
                <ellipse cx="184" cy="330" rx="15" ry="10" class="body-part" data-part="Right Foot" />
                <text x="184" y="336" text-anchor="middle" class="body-label">R.Foot</text>
            </svg>
        </div>
        
        <!-- Selected injury parts display -->
        <div class="selected-injuries">
            <label>Selected injury locations:</label>
            <div id="selectedInjuries" class="injury-tags"></div>
            <input type="hidden" id="injuryLocations" name="injuryLocations" />
        </div>
    </div>
</div>

         <fieldset>
    <legend>Type of Injury/Incident</legend>
    <p>Select all that apply:</p>
    
    <div class="checkbox-group">
      <label>
        <input type="checkbox" name="injury" value="abrasion-scrapes">
        Abrasion, Scrapes
      </label>
      
      <label>
        <input type="checkbox" name="injury" value="amputation">
        Amputation
      </label>
      
      <label>
        <input type="checkbox" name="injury" value="broken-bone">
        Broken bone
      </label>
      
      <label>
        <input type="checkbox" name="injury" value="bruise">
        Bruise
      </label>
      
      <label>
        <input type="checkbox" name="injury" value="burn-heat">
        Burn (heat)
      </label>
      
      <label>
        <input type="checkbox" name="injury" value="burn-chemical">
        Burn (Chemical)
      </label>
      
      <label>
        <input type="checkbox" name="injury" value="concussion">
        Concussion (to the head)
      </label>
      
      <label>
        <input type="checkbox" name="injury" value="crushing-injury">
        Crushing Injury
      </label>
      
      <label>
        <input type="checkbox" name="injury" value="cut-laceration-puncture">
        Cut, laceration or puncture
      </label>
      
      <label>
        <input type="checkbox" name="injury" value="hernia">
        Hernia
      </label>
      
      <label>
        <input type="checkbox" name="injury" value="sprain-strain">
        Sprain or strain
      </label>
      
      <label>
        <input type="checkbox" name="injury" value="illness">
        Illness
      </label>
      
      <label>
        <input type="checkbox" name="injury" value="other" id="other-checkbox">
        Other

           <label>
        <input type="checkbox" name="injury" value="other" id="other-checkbox">
        Other
      </label>
      
      <div id="other-input-container" style="display: none; margin-left: 25px;">
        <label for="other-description">Please specify:</label>
        <input type="text" id="other-description" name="other-description" 
               placeholder="Describe the injury type..." maxlength="100">
      </div>
    </div>
  </fieldset>

        <!-- Body part affected -->
        <div class="form-group">
            <label for="bodyPart">Body Part Affected (if applicable):</label>
            <input type="text" id="bodyPart" name="bodyPart" placeholder="e.g., left ankle, right hand, lower back">
        </div>


        <!-- New: Was body part hurt before -->
        <div class="form-group">
            <label>Was the body part hurt before?</label>
            <div class="radio-group">
                <label class="radio-label">
                    <input type="radio" name="bodyPartHurtBefore" value="no" checked>
                    No
                </label>
                <label class="radio-label">
                    <input type="radio" name="bodyPartHurtBefore" value="yes">
                    Yes
                </label>
            </div>
        </div>

        <!-- Previous injury details (hidden by default) -->
        <div class="form-group" id="previous-injury-group" style="display: none;">
            <label for="previousInjuryDetails">If yes, when:</label>
            <input type="text" id="previousInjuryDetails" name="previousInjuryDetails" placeholder="Please describe when the body part was previously injured">
        </div>

        <!-- New: Property damage question -->
        <div class="form-group">
            <label>Was there damage to property?</label>
            <div class="radio-group">
                <label class="radio-label">
                    <input type="radio" name="propertyDamage" value="no" checked>
                    No
                </label>
                <label class="radio-label">
                    <input type="radio" name="propertyDamage" value="yes">
                    Yes
                </label>
            </div>
        </div>

        <!-- Property damage details (hidden by default) -->
        <div class="form-group" id="property-damage-group" style="display: none;">
            <label for="propertyDamageDetails">If yes, specify:</label>
            <input type="text" id="propertyDamageDetails" name="propertyDamageDetails" placeholder="Please describe the property damage">
        </div>

        <!-- Moved: Detailed description -->
        <div class="form-group">
            <label for="incidentDescription">Detailed Description of Incident <span class="required-indicator">*</span>:</label>
            <textarea id="incidentDescription" name="incidentDescription" rows="6" placeholder="Please provide a detailed description of what happened, including sequence of events, contributing factors, and any immediate actions taken." required></textarea>
        </div>

        <div class="form-group">
    <label for="preventionMeasures">What could have been done to prevent this incident:</label>
    <textarea id="preventionMeasures" name="preventionMeasures" rows="4" placeholder="Describe what could have been done to prevent this incident"></textarea>
</div>
  
    <div class="form-actions">
    <button type="button" id="back-to-screen-2">← Back</button>
    <button type="button" id="next-to-screen-4">Next Page →</button>
</div>
        </div>
        </div>

<!-- SCREEN 4: Medical Information -->
<div id="screen-4" class="form-screen" style="display: none;">
    <div class="form-section">
        <h3>Medical Information</h3>
        
        <div class="form-group">
            <label>Did you see a doctor? <span class="required-indicator">*</span></label>
            <div class="radio-group">
                <label class="radio-label">
                    <input type="radio" name="sawDoctor" value="yes">
                    Yes
                </label>
                <label class="radio-label">
                    <input type="radio" name="sawDoctor" value="no">
                    No
                </label>
            </div>
        </div>

        <div class="form-group">
    <label>Are you going to see a doctor? <span class="required-indicator">*</span></label>
    <div class="radio-group">
        <label class="radio-label">
            <input type="radio" name="willSeeDoctor" value="yes">
            Yes
        </label>
        <label class="radio-label">
            <input type="radio" name="willSeeDoctor" value="no">
            No
        </label>
    </div>
</div>

<div id="will-see-doctor-details" style="display: none;">
    <div class="form-group">
        <label for="doctorName">Doctor/Hospital Name:</label>
        <input type="text" id="doctorName" name="doctorName" placeholder="Enter doctor name or hospital">
    </div>
</div>

<!-- New question added here -->
<div class="form-group">
    <label for="doctorHospitalName">Provide the name of the doctor or hospital (if visited):</label>
    <input type="text" id="doctorHospitalName" name="doctorHospitalName" placeholder="Enter doctor name or hospital name">
</div>
        
        <div class="form-group">
            <label>Was a company vehicle involved? <span class="required-indicator">*</span></label>
            <div class="radio-group">
                <label class="radio-label">
                    <input type="radio" name="companyVehicleInvolved" value="yes">
                    Yes
                </label>
                <label class="radio-label">
                    <input type="radio" name="companyVehicleInvolved" value="no">
                    No
                </label>
            </div>
        </div>

        <div id="company-vehicle-group" style="display: none;">
            <div class="form-group">
                <label for="companyVehiclePlate">License Plate Number:</label>
                <input type="text" id="companyVehiclePlate" name="companyVehiclePlate" placeholder="Enter license plate">
            </div>
        </div>
    </div>
    
    <div class="form-actions">
        <button type="button" id="back-to-screen-3">← Back</button>
        <button type="button" id="next-to-screen-5">Next Page →</button>
    </div>
</div>

    <!-- SCREEN 5: Third Party Information -->
<div id="screen-5" class="form-screen" style="display: none;">
    <div class="form-section">
        <h3>Third Party Information</h3>
        <p>Please provide information about any third parties involved in the incident.</p>
        
        <div class="form-group">
            <label>Third Party involved?</label>
            <div class="radio-group">
                <label class="radio-label">
                    <input type="radio" name="thirdPartyInvolved" value="no" checked>
                    No
                </label>
                <label class="radio-label">
                    <input type="radio" name="thirdPartyInvolved" value="yes">
                    Yes
                </label>
            </div>
        </div>

        <!-- Third party details (hidden by default) -->
        <div id="third-party-details" style="display: none;">
            <div class="form-row">
                <div class="form-group">
                    <label for="thirdPartyName">Name:</label>
                    <input type="text" id="thirdPartyName" name="thirdPartyName" placeholder="Enter third party name">
                </div>
                <div class="form-group">
                    <label for="thirdPartyLicense">Driver's License:</label>
                    <input type="text" id="thirdPartyLicense" name="thirdPartyLicense" placeholder="Enter driver's license number">
                </div>
            </div>

            <div class="form-group">
                <label for="thirdPartyContact">Contact number:</label>
                <input type="tel" id="thirdPartyContact" name="thirdPartyContact" placeholder="(555) 123-4567">
            </div>

            <div class="form-group">
                <label for="thirdPartyVehiclePlate">Other vehicle's license plate:</label>
                <input type="text" id="thirdPartyVehiclePlate" name="thirdPartyVehiclePlate" placeholder="Enter license plate number">
            </div>

            <div class="form-group">
                <label for="thirdPartyInsurance">Insurance number:</label>
                <input type="text" id="thirdPartyInsurance" name="thirdPartyInsurance" placeholder="Enter insurance policy number">
            </div>

            <div class="form-group">
                <label for="otherInfoExchanged">Any other information exchanged:</label>
                <textarea id="otherInfoExchanged" name="otherInfoExchanged" rows="4" placeholder="Describe any other information exchanged with third parties"></textarea>
            </div>
        </div>
    </div>
    
    <div class="form-actions">
        <button type="button" id="back-to-screen-4">← Back</button>
        <button type="button" id="submit-form-final">Submit Form</button>
    </div>
</div>
</div>
    
        <!-- Include required libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="script.js"></script>
    
    <script>
async function handleFormSubmit(formData) {
  const GOOGLE_APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzYMY_6-6kQiReZfUZITxSRPFEADKPWvNLC4b2zm3Au3HKS25FWBNLKap_jZCkA67GdVQ/exec';
  
  try {
    // Show loading message
    alert('Submitting report...');
    
    const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(formData)
    });
    
    const result = await response.json();
    
    if (result.status === 'success') {
      alert(`✅ Report submitted successfully!\nReport ID: ${result.reportId}`);
      document.getElementById('incident-form').reset(); // Clear form
    } else {
      alert('❌ Failed to submit report: ' + result.message);
    }
    
  } catch (error) {
    console.error('Error:', error);
    alert('❌ Network error. Please try again.');
  }
}

function collectFormData() {
  // Update these IDs to match your actual HTML form field IDs
  return {
    fullName: document.getElementById('fullName').value,
  phone: document.getElementById('phone').value,
  age: document.getElementById('age').value,
  email: document.getElementById('email').value,
  jobTitle: document.getElementById('jobTitle').value,
  employmentYears: document.getElementById('employmentYears').value,
  employmentMonths: document.getElementById('employmentMonths').value,
  supervisor: document.getElementById('supervisor').value,
  employmentStatus: document.getElementById('employmentStatus').value,

  // First Responder
  responder: document.getElementById('responder').value,
  otherResponder: document.getElementById('otherResponder').value,
  responderName: document.getElementById('responderName').value,
  policeReportFiled: document.getElementById('policeReportFiled').value,
  policeReportNumber: document.getElementById('policeReportNumber').value,
  witnesses: document.getElementById('witnesses').value,

  // Incident Details
  incidentDate: document.getElementById('incidentDate').value,
  incidentTime: document.getElementById('incidentTime').value,
  incidentLocation: document.getElementById('incidentLocation').value,
  workdayPart: document.getElementById('workdayPart').value,
  otherWorkdayPart: document.getElementById('otherWorkdayPart').value,
  bodyPart: document.getElementById('bodyPart').value,
  injuryLocations: document.getElementById('injuryLocations').value,
  bodyPartHurtBefore: document.getElementById('bodyPartHurtBefore').value,
  previousInjuryDetails: document.getElementById('previousInjuryDetails').value,
  propertyDamage: document.getElementById('propertyDamage').value,
  propertyDamageDetails: document.getElementById('propertyDamageDetails').value,
  incidentDescription: document.getElementById('incidentDescription').value,
  preventionMeasures: document.getElementById('preventionMeasures').value,

  // Medical
  sawDoctor: document.getElementById('sawDoctor').value,
  willSeeDoctor: document.getElementById('willSeeDoctor').value,
  doctorName: document.getElementById('doctorName').value,
  doctorHospitalName: document.getElementById('doctorHospitalName').value,

  // Vehicle
  companyVehicleInvolved: document.getElementById('companyVehicleInvolved').value,
  companyVehiclePlate: document.getElementById('companyVehiclePlate').value,

  // Third Party
  thirdPartyInvolved: document.getElementById('thirdPartyInvolved').value,
  thirdPartyName: document.getElementById('thirdPartyName').value,
  thirdPartyLicense: document.getElementById('thirdPartyLicense').value,
  thirdPartyContact: document.getElementById('thirdPartyContact').value,
  thirdPartyVehiclePlate: document.getElementById('thirdPartyVehiclePlate').value,
  thirdPartyInsurance: document.getElementById('thirdPartyInsurance').value,
  otherInfoExchanged: document.getElementById('otherInfoExchanged').value,
  };
}

// Hook up the form submission
document.addEventListener('DOMContentLoaded', function() {
  document.getElementById('incident-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = collectFormData();
    handleFormSubmit(formData);
  });
});
</script>
    
</body>
</html>
